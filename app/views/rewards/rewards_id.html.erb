<div class="container">
  <h1>Confirmation Page</h1>


  <p>Picture of the Retailer Coupon</p>

  <h2>Reward Chosen</h2>
  <table>
    <thead>
      <th>ID</th>
      <th>Retailer</th>
      <th>Value</th>
      <th>Expiry Date</th>
      <th>Category</th>
    </thead>
    <tbody>
      <tr>
      <td><%=@rewards.id %></td>
      <td><%=@rewards.merchant%></td>
      <td><%=@rewards.value%></td>
      <td><%=@rewards.expiry%></td>
      <td><%=@rewards.category%></td>
    </tr>
    </tbody>
  </table>

  <p>Promo Code for <%=@rewards.merchant%> will be shown on the next page after claiming selected reward!</p>

  <%= link_to "Claim", claimed_path, :id => @rewards.id, class: "button",method: :post%>

  <h2>Outlet Nearby</h2>
  <div id="map"></div>
</div>
<script type="text/javascript">
// This example requires the Places library. Include the libraries=places
    // parameter when you first load the API. For example:
    // <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places">

    var map;
    var infowindow;

    function initMap() {
      var pyrmont = {lat: -33.867, lng: 151.195};
      map = new google.maps.Map(document.getElementById('map'), {
        center: pyrmont,
        zoom: 15
      });

      infowindow = new google.maps.InfoWindow();
      var service = new google.maps.places.PlacesService(map);
      service.nearbySearch({
        location: pyrmont,
        radius: 500,
        type: ['store']
      }, callback);
    }

    function callback(results, status) {
      if (status === google.maps.places.PlacesServiceStatus.OK) {
        for (var i = 0; i < results.length; i++) {
          createMarker(results[i]);
        }
      }
    }

    function createMarker(place) {
      var placeLoc = place.geometry.location;
      var marker = new google.maps.Marker({
        map: map,
        position: place.geometry.location
      });

      google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(place.name);
        infowindow.open(map, this);
      });
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDtHj8tjiZM12fgzt9Dqc7VymEej48SwaU&libraries=places&callback=initMap" async defer></script>
